"use strict";(self.webpackChunksailpoint_developer_portal=self.webpackChunksailpoint_developer_portal||[]).push([[62591],{5395:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>h,contentTitle:()=>b,default:()=>N,frontMatter:()=>y,metadata:()=>g,toc:()=>k});var n=a(3905),i=Object.defineProperty,r=Object.defineProperties,l=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,d=(t,e,a)=>e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,c=(t,e)=>{for(var a in e||(e={}))o.call(e,a)&&d(t,a,e[a]);if(u)for(var a of u(e))s.call(e,a)&&d(t,a,e[a]);return t},p=(t,e)=>r(t,l(e)),m=(t,e)=>{var a={};for(var n in t)o.call(t,n)&&e.indexOf(n)<0&&(a[n]=t[n]);if(null!=t&&u)for(var n of u(t))e.indexOf(n)<0&&s.call(t,n)&&(a[n]=t[n]);return a};const y={id:"identity-attribute-rule",title:"Identity Attribute Rule",pagination_label:"Identity Attribute Rule",sidebar_label:"Identity Attribute Rule",sidebar_class_name:"identityAttributeRule",keywords:["cloud","rules","identity attribute"],description:"This rule calculates and returns an identity attribute for a specific identity.",slug:"/extensibility/rules/cloud-rules/identity-attribute-rule",tags:["Rules"]},b="Identity Attribute Rule",g={unversionedId:"extensibility/rules/cloud-rules/identity-attribute-rule",id:"extensibility/rules/cloud-rules/identity-attribute-rule",title:"Identity Attribute Rule",description:"This rule calculates and returns an identity attribute for a specific identity.",source:"@site/docs/extensibility/rules/cloud-rules/identity_attribute_rule.md",sourceDirName:"extensibility/rules/cloud-rules",slug:"/extensibility/rules/cloud-rules/identity-attribute-rule",permalink:"/docs/extensibility/rules/cloud-rules/identity-attribute-rule",draft:!1,editUrl:"https://github.com/sailpoint-oss/developer-community-site/edit/main/docs/extensibility/rules/cloud-rules/identity_attribute_rule.md",tags:[{label:"Rules",permalink:"/docs/tags/rules"}],version:"current",lastUpdatedBy:"GitHub Action Bot",lastUpdatedAt:1720812556,formattedLastUpdatedAt:"Jul 12, 2024",frontMatter:{id:"identity-attribute-rule",title:"Identity Attribute Rule",pagination_label:"Identity Attribute Rule",sidebar_label:"Identity Attribute Rule",sidebar_class_name:"identityAttributeRule",keywords:["cloud","rules","identity attribute"],description:"This rule calculates and returns an identity attribute for a specific identity.",slug:"/extensibility/rules/cloud-rules/identity-attribute-rule",tags:["Rules"]},sidebar:"openApiSidebar",previous:{title:"Generic Rule",permalink:"/docs/extensibility/rules/cloud-rules/generic-rule"},next:{title:"Manager Correlation Rule",permalink:"/docs/extensibility/rules/cloud-rules/manager-correlation-rule"}},h={},k=[{value:"Overview",id:"overview",level:2},{value:"Execution",id:"execution",level:2},{value:"Input",id:"input",level:2},{value:"Output",id:"output",level:2},{value:"Template",id:"template",level:2},{value:"Example - Calculate Lifecycle State Based on Start and End Dates",id:"example---calculate-lifecycle-state-based-on-start-and-end-dates",level:2}],f={toc:k},v="wrapper";function N(t){var e=t,{components:i}=e,r=m(e,["components"]);return(0,n.kt)(v,p(c(c({},f),r),{components:i,mdxType:"MDXLayout"}),(0,n.kt)("h1",c({},{id:"identity-attribute-rule"}),"Identity Attribute Rule"),(0,n.kt)("h2",c({},{id:"overview"}),"Overview"),(0,n.kt)("p",null,'This rule calculates and returns an identity attribute for a specific identity. This rule is known as a "complex" rule on the identity profile.'),(0,n.kt)("p",null,"An important consideration with IdentityAttribute rules is whether generation logic that includes uniqueness checks is acceptable. While not explicitly disallowed, this type of logic is firmly against SailPoint's ",(0,n.kt)("a",c({parentName:"p"},{href:"https://community.sailpoint.com/t5/IdentityNow-Articles/Best-Practices-Generating-Usernames-in-IdentityNow/ta-p/153749"}),"best practices"),". When calculating and promoting identity attributes via a transform or a rule, the logic contained within the attribute is always re-run and new values might end up being generated where such behavior is not desired. Additionally, the attribute calculation process is multi-threaded, so the uniqueness logic contained on a single attribute is not always guaranteed to be accurate. For this reason, SailPoint strongly discourages the use of logic that conducts uniqueness checks within an IdentityAttribute rule. The recommendation is to execute this check during account generation for the target system where the value is needed."),(0,n.kt)("h2",c({},{id:"execution"}),"Execution"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Cloud Execution")," - This rule executes in the Identity Security Cloud cloud, and it has read-only access to Identity Security Cloud data models, but it does not have access to on-premise sources or connectors."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Logging")," - Logging statements are currently only visible to SailPoint personnel."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Usage"),' - To use this rule once installed, first select "Complex Data Source" option under the Source dropdown, then select the rule name under the Transform drop down.')),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Rule Execution",src:a(44490).Z,width:"1594",height:"635"})),(0,n.kt)("h2",c({},{id:"input"}),"Input"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",c({parentName:"tr"},{align:null}),"Argument"),(0,n.kt)("th",c({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",c({parentName:"tr"},{align:null}),"Purpose"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",c({parentName:"tr"},{align:null}),"log"),(0,n.kt)("td",c({parentName:"tr"},{align:null}),"org.apache.log4j.Logger"),(0,n.kt)("td",c({parentName:"tr"},{align:null}),"Logger to log statements. ",(0,n.kt)("em",{parentName:"td"},"Note: This executes in the cloud, and logging is currently not exposed to anyone other than SailPoint."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",c({parentName:"tr"},{align:null}),"idn"),(0,n.kt)("td",c({parentName:"tr"},{align:null}),"sailpoint.server.IdnRuleUtil"),(0,n.kt)("td",c({parentName:"tr"},{align:null}),"Provides a read-only starting point for using the SailPoint API. From this passed reference, the rule can interrogate the Identity Security Cloud data model including identities or account information via helper methods as described in ",(0,n.kt)("a",c({parentName:"td"},{href:"/docs/extensibility/rules/rule-utility"}),"IdnRuleUtil"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",c({parentName:"tr"},{align:null}),"identity"),(0,n.kt)("td",c({parentName:"tr"},{align:null}),"sailpoint.object.Identity"),(0,n.kt)("td",c({parentName:"tr"},{align:null}),"Reference to identity object representing the identity being calculated.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",c({parentName:"tr"},{align:null}),"oldValue"),(0,n.kt)("td",c({parentName:"tr"},{align:null}),"java.lang.Object"),(0,n.kt)("td",c({parentName:"tr"},{align:null}),"Attribute value for the identity attribute before the rule runs.")))),(0,n.kt)("h2",c({},{id:"output"}),"Output"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",c({parentName:"tr"},{align:null}),"Argument"),(0,n.kt)("th",c({parentName:"tr"},{align:null}),"Type"),(0,n.kt)("th",c({parentName:"tr"},{align:null}),"Purpose"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",c({parentName:"tr"},{align:null}),"attributeValue"),(0,n.kt)("td",c({parentName:"tr"},{align:null}),"java.lang.Object"),(0,n.kt)("td",c({parentName:"tr"},{align:null}),"Value returned for the identity attribute.")))),(0,n.kt)("h2",c({},{id:"template"}),"Template"),(0,n.kt)("pre",null,(0,n.kt)("code",c({parentName:"pre"},{className:"language-xml"}),'<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n<!DOCTYPE Rule PUBLIC "sailpoint.dtd" "sailpoint.dtd">\n<Rule name="Example Rule" type="IdentityAttribute">\n  <Description>Describe your rule here.</Description>\n  <Source><![CDATA[\n\n\n  // Add your logic here.\n\n  ]]></Source>\n</Rule>\n')),(0,n.kt)("h2",c({},{id:"example---calculate-lifecycle-state-based-on-start-and-end-dates"}),"Example - Calculate Lifecycle State Based on Start and End Dates"),(0,n.kt)("admonition",c({},{type:"info"}),(0,n.kt)("p",{parentName:"admonition"},"The life cycle state attribute is computed last during refresh. This allows you to reference other identity attributes within the rule.")),(0,n.kt)("pre",null,(0,n.kt)("code",c({parentName:"pre"},{className:"language-java"}),'<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n<!DOCTYPE Rule PUBLIC "sailpoint.dtd" "sailpoint.dtd">\n<Rule name="Example Rule" type="IdentityAttribute">\n  <Description>Calculates LCS based on start and end dates.</Description>\n  <Source><![CDATA[\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\n// Date format we expect dates to be in (ISO8601)\nSimpleDateFormat dateFormat = new SimpleDateFormat( "yyyy-MM-dd" );\n\n// Parse the start date from the identity, and put in a Date object.\nDate startDate = null;\nif ( identity.getAttribute( "startDate" ) != null ) {\n  startDate = dateFormat.parse( identity.getAttribute( "startDate" ) );\n}\n\n// Parse the end date from the identity, and put in a Date object.\nDate endDate = null;\nif ( identity.getAttribute( "endDate" ) != null ) {\n  endDate = dateFormat.parse( identity.getAttribute( "endDate" ) );\n}\n\n// Define a date for today\nDate today = new Date();\n\n// Calculate lifecycle state based on the attributes.\nif( startDate.before( today ) && endDate.after( today ) ) {\n  return "active";\n} else if ( endDate.before( today ) ) {\n  return "inactive";\n}\n\n// If we haven\'t calculated a state already, return null.\nreturn null;\n\n  ]]></Source>\n</Rule>\n')))}N.isMDXComponent=!0},44490:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/cloud_execution-7029b7fdcb50a6ea04ef055f18117067.png"}}]);